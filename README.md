# ๐ Shai.pro Security Platform

**ะะปะฐััะพัะผะฐ ะผะพะฝะธัะพัะธะฝะณะฐ ะฑะตะทะพะฟะฐัะฝะพััะธ ั ML ะดะตัะตะบัะธะตะน ะฐะฝะพะผะฐะปะธะน**

ะกะธััะตะผะฐ ัะพััะพะธั ะธะท ะผะธะบัะพัะตัะฒะธัะพะฒ:

- **log-generator** - ะณะตะฝะตัะฐัะพั ะปะพะณะพะฒ ะฑะตะทะพะฟะฐัะฝะพััะธ (3 ัะธะฟะฐ: auth, firewall, app)
- **ml-detector** - ML-ะดะตัะตะบัะพั ะฐะฝะพะผะฐะปะธะน ั Isolation Forest
- **parser** - ะฟะฐััะตั ะธ ะพะฑัะฐะฑะพััะธะบ ัะพะฑััะธะน
- **ai-assistant** - AI ะฐััะธััะตะฝั ะดะปั ะฐะฝะฐะปะธะทะฐ ัะณัะพะท
- **frontend** - React ะฒะตะฑ-ะธะฝัะตััะตะนั ะดะปั ะผะพะฝะธัะพัะธะฝะณะฐ

## โก ะัััััะน ััะฐัั ะดะปั ัะฐะบะฐัะพะฝะฐ

### ๐ฏ ะะดะธะฝ ะบะปะธะบ - ะฒัะต ัะฐะฑะพัะฐะตั!

```bash
# ะะฐะฟัััะธัั ะดะตะผะพ
make demo

# ะะปะธ ะฒัััะฝัั:
make build && make up
```

### ๐ ะัะพะฒะตัะธัั ัะฐะฑะพัั

```bash
# ะกัะฐััั ัะตัะฒะธัะพะฒ
make status

# ะัะพะฒะตัะธัั ะทะดะพัะพะฒัะต
make health

# ะะพัะผะพััะตัั ะธะฝัะธะดะตะฝัั
make incidents

# ะกัะฐัะธััะธะบะฐ ML-ะฐะฝะฐะปะธะทะฐ
make ml-stats

# ะกะธะผัะปััะธั ะฑะปะพะบะธัะพะฒะบะธ
make demo-block
```

### ะัะพะฒะตัะบะฐ ััะฐัััะฐ

```bash
# ะกัะฐััั ะฒัะตั ัะตัะฒะธัะพะฒ
make status

# ะัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั ัะตัะฒะธัะพะฒ
make health

# ะัะพัะผะพัั ะธะฝัะธะดะตะฝัะพะฒ
make incidents
```

## ๐ ะะตะฑ-ะธะฝัะตััะตะนั

ะะพัะปะต ะทะฐะฟััะบะฐ ะพัะบัะพะนัะต ะฒ ะฑัะฐัะทะตัะต:
```
http://localhost:3000
```

Frontend ะฟัะตะดะพััะฐะฒะปัะตั:
- ๐ Dashboard ั ะพะฑัะตะน ััะฐัะธััะธะบะพะน
- ๐ก๏ธ ะะพะฝะธัะพัะธะฝะณ ะฐะฝะพะผะฐะปะธะน ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- ๐ ะกะฟะธัะพะบ ะฟะพะดะพะทัะธัะตะปัะฝัั IP ะฐะดัะตัะพะฒ
- ๐ ะะตัะฐะปัะฝะฐั ะธะฝัะพัะผะฐัะธั ะพ ะบะฐะถะดะพะผ IP
- ๐ ะะปะพะบะธัะพะฒะบะฐ/ัะฐะทะฑะปะพะบะธัะพะฒะบะฐ IP ะฐะดัะตัะพะฒ
- ๐ค AI ะฐััะธััะตะฝั (ะฒ ัะฐะทัะฐะฑะพัะบะต)

## API Endpoints

### Frontend (ะฟะพัั 3000)
- `GET /` - ะฒะตะฑ-ะธะฝัะตััะตะนั
- `GET /anomalies` - ัััะฐะฝะธัะฐ ะฐะฝะพะผะฐะปะธะน
- `GET /ips` - ัะฟะธัะพะบ IP ะฐะดัะตัะพะฒ
- `GET /ips/:ip` - ะดะตัะฐะปะธ IP

### Parser (ะฟะพัั 8000)
- `GET /health` - ะฟัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
- `POST /ingest` - ะฟัะธะตะผ ะปะพะณะพะฒ
- `GET /incidents` - ัะฟะธัะพะบ ะธะฝัะธะดะตะฝัะพะฒ

### ML Detector (ะฟะพัั 8001)
- `GET /healthz` - ะฟัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
- `GET /anomalies` - ัะฟะธัะพะบ ะฐะฝะพะผะฐะปะธะน
- `GET /ips` - ัะฟะธัะพะบ IP ะฐะดัะตัะพะฒ
- `POST /lists/deny` - ะฑะปะพะบะธัะพะฒะบะฐ IP

### AI Assistant (ะฟะพัั 8002)
- `GET /health` - ะฟัะพะฒะตัะบะฐ ะทะดะพัะพะฒัั
- `GET /status` - ััะฐััั ะฑะตะทะพะฟะฐัะฝะพััะธ
- `GET /analyze/{ip}` - ะฐะฝะฐะปะธะท IP

## ะฃะฟัะฐะฒะปะตะฝะธะต ัะตัะฒะธัะฐะผะธ

```bash
# ะััะฐะฝะพะฒะธัั ะฒัะต ัะตัะฒะธัั
make down

# ะะตัะตะทะฐะฟัััะธัั ะฒัะต ัะตัะฒะธัั
make restart

# ะะตัะตะทะฐะฟัััะธัั ะบะพะฝะบัะตัะฝัะน ัะตัะฒะธั
make restart-parser
make restart-ml
make restart-generator

# ะัะพัะผะพัั ะปะพะณะพะฒ
make logs                    # ะฒัะต ัะตัะฒะธัั
make logs-parser            # ัะพะปัะบะพ parser
make logs-ml               # ัะพะปัะบะพ ml-detector
make logs-generator        # ัะพะปัะบะพ log-generator
```

## ะะตะผะพะฝัััะฐัะธั

```bash
# ะกะธะผัะปััะธั ะฑะปะพะบะธัะพะฒะบะธ IP
make demo-block

# ะัะพัะผะพัั ัะตะบััะธั ะธะฝัะธะดะตะฝัะพะฒ
make incidents
```

## ะัะธััะบะฐ

```bash
# ะััะฐะฝะพะฒะธัั ะธ ัะดะฐะปะธัั ะฒัะต ะบะพะฝัะตะนะฝะตัั ะธ volumes
make clean

# ะะพะปะฝะฐั ะฟะตัะตัะฑะพัะบะฐ
make rebuild
```

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโ
โ  log-generators  โ
โ  (auth/fw/app)   โ
โโโโโโโโโโฌโโโโโโโโโโ
         โ
         โ
    โโโโโโโโโโ
    โ parser โ  โโโ  โโโโโโโโโโโโโโโ
    โโโโโโฌโโโโ       โ  shipper    โ
         โ           โโโโโโโโฌโโโโโโโ
         โ                  โ
    โโโโโโโโโโโ      โโโโโโโโโโโโโโโ      โโโโโโโโโโโโ
    โ JSONL   โ      โ ml-detector โ โโโโ โ postgres โ
    โ ัะฐะนะปั   โ      โ  (ML API)   โ      โโโโโโโโโโโโ
    โโโโโโโโโโโ      โโโโโโโโฌโโโโโโโ
                            โ
                     โโโโโโโโโโโโโโโโ
                     โ ai-assistant โ
                     โ  (Gemini AI) โ
                     โโโโโโโโฌโโโโโโโโ
                            โ
                     โโโโโโโโโโโโโโโโ
                     โ   frontend   โ
                     โ  (React UI)  โ
                     โโโโโโโโโโโโโโโโ
```

### ะะพัะพะบ ะดะฐะฝะฝัั:
1. **log-generators** (3 ัะธะฟะฐ) ะณะตะฝะตัะธัััั ะปะพะณะธ ะธ ะพัะฟัะฐะฒะปััั ะฒ **parser**
2. **parser** ะฝะพัะผะฐะปะธะทัะตั ัะพะฑััะธั ะธ ัะพััะฐะฝัะตั ะฒ JSONL ัะฐะนะป
3. **shipper** ัะธัะฐะตั JSONL ัะฐะนะป ะธ ะพัะฟัะฐะฒะปัะตั ะฑะฐััะฐะผะธ ะฒ **ml-detector**
4. **ml-detector** ะฐะฝะฐะปะธะทะธััะตั ัะตัะตะท Isolation Forest ะธ ัะพััะฐะฝัะตั ะฒ **postgres**
5. **ai-assistant** ะฟะพะปััะฐะตั ะดะฐะฝะฝัะต ะธะท ml-detector ะธ ะฐะฝะฐะปะธะทะธััะตั ัะตัะตะท Gemini AI
6. **frontend** ะพัะพะฑัะฐะถะฐะตั ะฒัะต ะดะฐะฝะฝัะต ะฒ ะบัะฐัะธะฒะพะผ ะฒะตะฑ-ะธะฝัะตััะตะนัะต

## ะะตัะตะผะตะฝะฝัะต ะพะบััะถะตะฝะธั

### log-generator
- `PARSER_URL` - URL ะฟะฐััะตัะฐ (ะฟะพ ัะผะพะปัะฐะฝะธั: http://parser:8000/ingest)
- `RATE` - ัะฐััะพัะฐ ะณะตะฝะตัะฐัะธะธ ัะพะฑััะธะน ะฒ ัะตะบัะฝะดั (ะฟะพ ัะผะพะปัะฐะฝะธั: 5)
- `BATCH` - ัะฐะทะผะตั ะฑะฐััะฐ ัะพะฑััะธะน (ะฟะพ ัะผะพะปัะฐะฝะธั: 5)

## ะะพะฝะธัะพัะธะฝะณ

ะัะต ัะตัะฒะธัั ะธะผะตัั health check endpoints ะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะตัะตะทะฐะฟััะบะฐัััั ะฟัะธ ัะฑะพัั.

ะะปั ะฟัะพัะผะพััะฐ ะผะตััะธะบ ะธัะฟะพะปัะทัะนัะต:
```bash
docker stats
```
